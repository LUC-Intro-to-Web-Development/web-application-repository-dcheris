import axios from "axios"
import crunchyroll from "./crunchyroll"
import {FFmpegProgress} from "./types"

(async () => {
    const progress = (p: FFmpegProgress) => {
        if (p.percent > 5) return "stop"
        console.log(p.percent)
    }
    const ffmpegPath = "/Users/chris/Documents/Moepi/Programming/Applications/crunchyroll-downloader/ffmpeg/ffmpeg.app"
    let intro = {startTime: 0.0, endTime: 20.2}
    //@ts-ignore
    const result = await crunchyroll.util.downloadEpisode("https://www.crunchyroll.com/classroom-of-the-elite/episode-1-what-is-evil-whatever-springs-from-weakness-742255", "./videos", {resolution: 720, codec: "h.264", softSubs: false, intro, ffmpegPath}, progress)
    console.log(result)
})()
